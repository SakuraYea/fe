<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>HTML5中的Web Notification桌面通知</title>
</head>
<body>
    <button id="button">有人想加你为好友</button>
    <p id="text"></p>
<script type="text/javascript">
    var btn = document.querySelector("#button"),text = document.querySelector("#text");
    if (window.Notification) {
        btn.onclick = function(){
            if (Notification.permission == 'granted') {
                showNotice();
            }else if(Notification.permission != 'denied'){
                Notification.requestPermission(function(permission){
                    showNotice();
                });
            }
        };
        function showNotice(){
            var notification = new Notification('呵呵达',{
                body: '可以加你为好友吗？',
                icon: 'http://image.zhangxinxu.com/image/study/s/s128/mm1.jpg'
            });
            notification.onclick = function(){
                text.innerHTML = '呵呵哒' + new Date().toTimeString().split(' ')[0] + '加你为好友';
                notification.close();
            };
        }
    }else{
        alert("浏览器不支持通知属性");
    }
// var titleInit = document.title, isShine = true;
//
// setInterval(function() {
//     var title = document.title;
//     if (isShine == true) {
//         if (/新/.test(title) == false) {
//             document.title = '【你有新消息】';
//         } else {
//             document.title = '【　　　　　】';
//         }
//     } else {
//         document.title = titleInit;
//     }
// }, 500);
//
// window.onfocus = function() {
//     isShine = false;
// };
// window.onblur = function() {
//     isShine = true;
// };
//
// // for IE
// document.onfocusin = function() {
//     isShine = false;
// };
// document.onfocusout = function() {
//     isShine = true;
// };
</script>
</body>
</html>
